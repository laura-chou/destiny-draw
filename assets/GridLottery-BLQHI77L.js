import{al as C,am as S,an as G,ao as a,ap as L,z as o,f as x,ar as m,aw as P,at as W,G as u,c as f,ay as B,az as M,aq as N}from"./index-DiTNGkJu.js";import{V as y,a as R,b as T,c as j,_ as D}from"./_plugin-vue_export-helper-CeApmRvS.js";import{V as q}from"./VDialog-CQBwlFGj.js";const A={class:"lucky-grid-wrapper"},E={class:"text-h4 font-weight-black text-white"},I=C({__name:"GridLottery",setup(O){const h=M(),i=S(),d=u(),r=u(!1),l=u(""),g=f(()=>typeof window<"u"?Math.min(window.innerWidth-65,400):400),p=f(()=>typeof window<"u"?Math.min(window.innerWidth-120,300)+"px":"270px"),w=[{padding:"10px",background:"#00bcd4"},{padding:"5px",background:"#006064"}],v={background:"#e0f7fa",fonts:[{fontSize:"14px",fontColor:"#006064"}]},_=f(()=>{const t=i.availablePrizes,e=[],c=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:1,y:2},{x:0,y:2},{x:0,y:1}];for(let s=0;s<8;s++){const n=t[s%t.length];e.push({...c[s],fonts:[{text:(n==null?void 0:n.name)||"再接再厲",top:"35%",fontWeight:"700",fontSize:"16px"}],background:s%2===0?"#fffde7":"#fff9c4",borderRadius:"8px",shadow:"0 4px 0 #fbc02d",id:n==null?void 0:n.id})}return e}),k=[{x:1,y:1,background:"#ff5722",shadow:"0 4px 0 #e64a19",fonts:[{text:"GO!",top:"25%",fontColor:"#fff",fontSize:"24px",fontWeight:"900"}]}],b=()=>{d.value.play(),setTimeout(()=>{const t=Math.floor(Math.random()*8);d.value.stop(t)},2e3)},z=t=>{l.value=t.fonts[0].text,r.value=!0,i.recordWin(l.value,t.id)},V=()=>{r.value=!1,i.availablePrizes.length<2&&h.push("/settings")};return(t,e)=>{const c=B("LuckyGrid");return N(),G(L,{class:"d-flex flex-column align-center justify-center pa-0"},{default:a(()=>[o(y,{class:"mx-auto pa-4 pa-sm-6 grid-outer-card",elevation:"20",rounded:"xl","max-width":g.value},{default:a(()=>[x("div",A,[o(c,{ref_key:"myLucky",ref:d,width:p.value,height:p.value,prizes:_.value,blocks:w,buttons:k,defaultStyle:v,onStart:b,onEnd:z},null,8,["width","height","prizes"])])]),_:1},8,["max-width"]),o(q,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),"max-width":"320",persistent:""},{default:a(()=>[o(y,{class:"rounded-xl pa-4 result-card"},{default:a(()=>[o(R,{class:"text-center text-h5 font-weight-bold text-cyan-accent-2"},{default:a(()=>[...e[1]||(e[1]=[m("恭喜",-1)])]),_:1}),o(T,{class:"text-center py-6"},{default:a(()=>[x("div",E,P(l.value),1)]),_:1}),o(j,{class:"justify-center"},{default:a(()=>[o(W,{class:"text-black",color:"cyan-accent-4",variant:"elevated",size:"large",rounded:"pill",width:"160",onClick:V},{default:a(()=>[...e[2]||(e[2]=[m("確定",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),J=D(I,[["__scopeId","data-v-e49bc072"]]);export{J as default};
